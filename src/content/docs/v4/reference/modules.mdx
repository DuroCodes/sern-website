---
title: Modules 
description: Learn how to create modules for your sern bot
sidebar:
  order: 2
---


import { Tabs, TabItem } from '@astrojs/starlight/components';

## Introduction 

sern operates with **modules**. At its core, modules contain `type` and `execute` fields on an object, with some code to possibly run before
executing.

## Modules

We'll walk you through creating your first command module.

If you installed a new project via the CLI, your file should be here:

import { FileTree } from '@astrojs/starlight/components';

<FileTree>
- src/commands/
    - **ping.js** **(right here, probably)**
- ...
</FileTree>

### Application Commands
- Includes `CommandType.Slash`, `CommandType.Both`, `CommandType.CtxUser`, `CommandType.CtxMsg`

####  Chat Input Commands (Slash Commands)
```js title="src/commands/ping.js"
import { commandModule, CommandType } from "@sern/handler";

export default commandModule({
  type: CommandType.Slash,
  description: "A ping command",
  execute: async (ctx, sdt) => {
    await ctx.reply("Pong üèì");
  },
});

```


#### Context Menus

```js title="src/commands/hello.js"
import { commandModule, CommandType } from "@sern/handler";

export default commandModule({
  type: CommandType.CtxMsg,
  execute: async (ctx) => {
    await ctx.reply("Hello.");
  },
});
```

:::tip 
Run `sern commands publish` so discord registers it to your application correctly.
:::


### Components 

So, lets say you want to make a command module that listens to **buttons**, or ANY **component** (modals, select menus).

<Tabs syncKey="language-preference">
  <TabItem value="js" label="Send Component with Custom Id">
    ```js title="src/commands/ping.js"
    import { CommandType, commandModule } from "@sern/handler";
    import { ButtonStyle, ActionRowBuilder, ButtonBuilder } from 'discord.js';
    export default commandModule({
        type: CommandType.Slash,
        description: "A ping command",
        execute: async (ctx, sdt) => {
            const editButton = new ButtonBuilder({
                customId: "btn",
                label: "Click me",
                emoji: "üõ†",
                style: ButtonStyle.Primary,
            });
            await ctx.reply({ 
                content: "Pong üèì", 
                components: [new ActionRowBuilder().addComponents(editButton)] 
            });
        },
    });
    ```
  </TabItem>
  <TabItem value="ts" label="Button Listener">
    ```ts title="src/commands/btn.js"
    import { CommandType, commandModule } from "@sern/handler";

    export default commandModule({
        type: CommandType.Button,
        execute: (ibtn) => {
            ibtn.reply('clicked')
        },
    });    
    ```
  </TabItem>
</Tabs>

### Dynamic Component Parameters
Components can carry metadata. This comes in handy when handling multiple components of the same purpose. This is good for passing small, string based data across components. 

<Tabs syncKey="language-preference">
  <TabItem value="js" label="Send Component with Custom Id">
    ```diff title="src/commands/ping.js"
    import { CommandType, commandModule } from "@sern/handler";
    import { ButtonStyle, ActionRowBuilder, ButtonBuilder } from 'discord.js';
    export default commandModule({
        type: CommandType.Slash,
        description: "A ping command",
        execute: async (ctx, sdt) => {
            const editButton = new ButtonBuilder({
    -           customId: "btn",
    +           customId: "btn/1061421834341462036",
                label: "Click me",
                emoji: "üõ†",
                style: ButtonStyle.Primary,
            });
            await ctx.reply({ 
                content: "Pong üèì", 
                components: [new ActionRowBuilder().addComponents(editButton)] 
            });
        },
    });
    ```
  </TabItem>
  <TabItem value="ts" label="Button Listener">
    ```ts title="src/commands/btn.js"
    import { CommandType, commandModule } from "@sern/handler";

    export default commandModule({
        type: CommandType.Button,
        execute: (ibtn, sdt) => {
            ibtn.reply('clicked with ' + sdt.params)
        },
    });    
    ```
  </TabItem>
</Tabs>

:::tip
The first `/` is significant in custom ids. On the left of it is the custom id to be matched, and on the right is any user defined data.
:::
